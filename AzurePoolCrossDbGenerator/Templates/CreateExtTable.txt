-- Creates an external table on Master to access the same table on Mirror
-- for remote reads from Master.

-- 0 - mirrorDB
-- 1 - masterDB
-- 2 - masterTable
-- 3 - table columns

USE [{1}]
GO

DROP EXTERNAL TABLE IF EXISTS {0}__{2}_ext
GO

CREATE EXTERNAL TABLE {0}__{2}_ext(
	{3},
	mirror_key UNIQUEIDENTIFIER NULL
)WITH ( DATA_SOURCE = RemoteDB_{0}, SCHEMA_NAME = N'dbo', OBJECT_NAME = N'{1}__{2}')

GO